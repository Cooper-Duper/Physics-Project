#include "utils.c"
#if defined(PLATFORM_WEB)
//Possible emscripten header... Needs to be installed
#endif

int main(int argc, char** argv) {
    setup();
    PointArrAdd(&state.points, &(PhysPoint) {
            .isStatic = 1,
            });
    PointArrAdd(&state.points, &(PhysPoint) {
            .position.y = -10,
            .mass = 10,
            });
    CircArrAdd(&state.circles, &(Circle) {
            .centerAddr = 1,
            .radius = 60
            });
    /*
    SpringArrAdd(&state.springs, &(Spring) {
            .constant = 9800,
            .end1Index = 0,
            .end2Index = 1,
            .InitialLenSquare = 0,
            .InitialLen = 0
            });
            */

    //state.points.ptr[1].position.y = -50;
    //Main loop
    while(!WindowShouldClose()) {
        //Incrementing the simulation time and frame time
        updateTime();
        if (!state.isPaused) updatePhysics();

        //Drawing and polling inputs at 60hz
        if (state.time.runningFrameTime >= state.time.desiredFrameTime) {
            processInputs();
            drawFrame();
            //Resetting counters
            state.time.runningFrameTime = 0.0;
            state.physFrameCounter = 0;
        }
    }
    cleanup();
}
